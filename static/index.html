<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>shellfied</title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@500;600;700&family=Montserrat&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css" />
    <link rel="stylesheet" href="./main.css" />
</head>

<body>
    <div class="body-wrap">
        <div class="header"><h1 class="themed">Shellfie</h1><h1>ü§≥üèΩ</h1></div>
        
        <a class="github-fork-ribbon" href="https://github.com/tool3/shellfied" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a>
        
            <div class="sec">
                <h2 class="title themed">shellfie as a service</h1>
                <div class="para">use JSON to create beautiful terminal images using one POST</div>
            </div>

            <div class="sec">
                <h2 class="title themed"><a href="https://github.com/tool3/shellfied#api">API docs</a></h1>
            </div>
            
            <div class="sec">
                <h2 class="title themed">Try It</h1>
                <pre contenteditable id="req">
{
    "data": [
        "\\x1b[45mHELLO WORLD",
        "\\x1b[3mSO COOL",
        "\\x1b[105mWOW"
    ]
}
                </pre>
                <button class="btn" onclick="getImage()">Get my shellfie</button>
            </div>
            <div id="replace"></div>
        <footer class="footer">
            <div class="social">
                <a class="linkedIn social_icon" href="https://linkedin.com/in/talhayut" noreferrer
                    target="_blank"></a>
                <a class="github social_icon" href="https://github.com/tool3" noreferrer
                    target="_blank"></a>
                <a class="npm social_icon" href="https://npmjs.com/~tool3" noreferrer target="_blank"></a>
            </div>

            <div class="footer-copyright">Tal Hayut &copy; 2021</div>
        </footer>
    </div>
</body>
<script>
    async function getImage() {
        document.querySelector('#replace').innerHTML = '';

        const req = document.getElementById('req');
        console.log(req.innerText)
        const body = req.innerText;
        fetch('https://shellfie.herokuapp.com/json', { method: 'post', body, headers: { 'Content-Type': 'application/json'} }).then(res => {
            res.blob().then(blob=>{
                const img = document.createElement('img');
                const url = URL.createObjectURL(blob);
                img.src = url;
                img.style.height = 'auto';
                img.style.width = '100%';
                document.querySelector('#replace').appendChild(img);
            });
        });
    }
    
</script>
</html>